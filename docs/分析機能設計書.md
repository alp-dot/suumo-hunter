# 重回帰分析

## 概要

物件の割安度を定量的に判定するため、重回帰分析を使用して「予測家賃」を算出し、実際の家賃と比較します。

## 分析モデル

### 目的変数
- **総賃料** = 家賃 + 管理費（円/月）

### 説明変数
- **専有面積** (m²)
- **築年数** (年)
- **階数** (階)
- **駅徒歩分数** (分)
- **最寄り駅** (ダミー変数)

### 回帰式

```
予測総賃料 = β₀ + β₁×面積 + β₂×築年数 + β₃×階数 + β₄×徒歩分数 + Σ(γᵢ×駅ダミーᵢ)
```

### 駅ダミー変数について

エリア（最寄り駅）による家賃相場の違いを考慮するため、最寄り駅をダミー変数として追加しています。

- 各駅に対して0/1のダミー変数を作成
- 多重共線性を防ぐため、1つの駅を参照カテゴリとして除外（アルファベット順で最初の駅）
- 例: 吉祥寺、三鷹、武蔵境の3駅がある場合、三鷹と武蔵境のダミー変数を作成（吉祥寺が参照カテゴリ）

## 割安度の算出

```
割安度（円） = 予測総賃料 - 実際総賃料
```

## 分析の前提条件

- **最低サンプル数**: 10件以上
- サンプル不足時は回帰分析をスキップし、通知では「分析中」と表示

## 使用ライブラリ

- `gonum.org/v1/gonum/stat` - 統計計算

## コード例

```go
// 回帰分析の実行
analyzer := analyzer.New()
coefficients, err := analyzer.Fit(properties)
if err != nil {
    // サンプル不足など
    return nil, err
}

// 各物件のスコア（割安度）を算出
for i := range properties {
    properties[i].Score = analyzer.CalculateScore(properties[i])
}
```
